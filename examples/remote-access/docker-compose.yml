# Remote access desktop â€” KasmVNC + XRDP + NoMachine
# Usage: docker compose up -d
# Access:
#   KasmVNC:   http://localhost:6901
#   XRDP:      localhost:3389  (any RDP client)
#   NoMachine: localhost:4000  (NoMachine client)

services:
  desktop:
    image: ghcr.io/andrius/desktop:latest
    hostname: remote-desktop
    restart: unless-stopped
    security_opt:
      - seccomp:unconfined
    cap_add:
      - SYS_PTRACE
    shm_size: 2gb
    ports:
      - "6901:6901"
      - "3389:3389"
      - "4000:4000"
    environment:
      - USERNAME=user
      - USER_PASSWORD=changeme
      - VNC_PW=changeme
      - RESOLUTION=1920x1080x24
      - TZ=UTC
      - PLUGINS=xrdp,nomachine
    volumes:
      - desktop-home:/home/user

volumes:
  desktop-home:
